# USL Compiler - Full Compilation Pipeline

This project implements a complete compiler for the URL-based Specification Language (USL) with a full compilation pipeline including parsing, semantic analysis, intermediate code generation, and optimization.

## Project Overview

The USL compiler implements a full compilation pipeline:
- **Parsing**: Generated by flex and bison from `usl.y` and lexer specifications
- **AST**: Built in `ast.c/h` for syntax representation
- **Symbol Table**: Managed in `symbol_table.c/h` for semantic analysis
- **Semantic Analysis**: Performed in `semantic_analysis.c`
- **TAC Generation**: Three-address code generation in `tac_generator.c/h`
- **Basic Blocks**: Constructed in `basic_blocks.c/h`
- **Optimization**: Implemented in `optimizer.c/h` with logging

## Key Features

1. **AST Generation and Visualization**: Produces a complete Abstract Syntax Tree representation of USL code
2. **Three-Address Code (TAC) Generation**: Converts AST to quadruple-form intermediate representation
3. **Code Optimization**: Applies constant folding, strength reduction, and dead code elimination
4. **Detailed Reporting**: Generates comprehensive output files for analysis

## Build Instructions

### Windows (using MinGW)

1. Install MinGW and ensure `gcc`, `win_flex`, and `win_bison` are available in your PATH
2. Open a command prompt in the project directory
3. Run the individual build commands:
   ```
   win_flex usl.l
   win_bison -d usl.y
   gcc -o usl_parser.exe -DSTANDALONE_PARSER usl.tab.c usl.lex.c ast.c symbol_table.c semantic_analysis.c -lm
   gcc -o usl_compiler.exe main.c usl.tab.c usl.lex.c ast.c symbol_table.c semantic_analysis.c tac_generator.c basic_blocks.c optimizer.c -lm
   ```

### Alternative Build (using batch script)
```
build.bat
```

### POSIX-like environments (MSYS2, Linux, macOS)
```
make
```

## Usage

Run the compiler with an input file:
```
.\usl_compiler.exe input.txt
```

## Output Files

The compiler generates the following outputs in the `output/` directory:
- `tac.txt` - Original Three-Address Code in quadruple form
- `optimized_tac.txt` - Optimized Three-Address Code in quadruple form
- `basic_blocks.txt` - Basic block construction information
- `optimization_log.txt` - Detailed optimization report with justifications

## Console Output

When executed, the compiler displays:
1. **AST (Abstract Syntax Tree)** - Tree representation of the parsed code
2. **TAC in quadruple form** - Intermediate representation before and after optimization
3. **Optimization report** - Details of applied optimizations with justifications